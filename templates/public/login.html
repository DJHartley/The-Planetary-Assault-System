{% extends "../main.html" %}

{% block title %}Login{% end %}

{% block header %}
  {% if recaptcha_enable == True %}
    <script type="text/javascript" src="https://www.google.com/recaptcha/api/js/recaptcha_ajax.js"></script>
  {% end %}
{% end %}

{% block content %}
  {% if recaptcha_enable == True %}
      <!-- Wrapping the Recaptcha create method in a javascript function -->
      <script type="text/javascript">
      function showRecaptcha(element) {
         Recaptcha.create("6LcJJ88SAAAAAFzcmQqDPWGKRQXmJ0DCiZoPWTZf", element, {
           theme: "blackglass",
           callback: null});
       }
      $(document).ready(function() {
    	  showRecaptcha('recaptcha_div'); 
       });
    </script>
  {% end %}
  <h2>Login</h2>
  <br />
  {% if errors != None and len(errors) != 0 %}
    {% for error in errors %}
      <div class="alert alert-error">
        <a class="close" data-dismiss="alert" href="#">Ã—</a>
        <h4 class="alert-heading">ERROR</h4>
        {{ error }}
      </div>
    {% end %}
  {% end %}
  <div class="well">
    <form action="/login" method="post" autocomplete="off">  
      {% raw xsrf_form_html() %}
      <fieldset>
      <legend>Login</legend>
        <p>
          <label for="username">Username</label>
          <input name="username"  placeholder="Username" type="text" />
        </p>
        <p>
          <label for="password">Password</label>
          <input name="password" placeholder="Password" type="password" />
        </p>
        {% if recaptcha_enable == True %}
          <p>
            <label for="recaptch_div">Are you a Cylon?</label>
            <div id="recaptcha_div">
            </div>
          </p>
        {% else %}
          <p>
            <!-- Recaptcha has been disabled -->
            <input name="recaptcha_challenge_field" type="hidden" value="disabled" />
            <input name="recaptcha_response_field" type="hidden" value="disabled" />
          </p>
        {% end %}
      </fieldset>
      <p class="submit">
        <button class="btn btn-primary btn-large" type="submit"> Authenticate </button>
      </p>   
    </form>
    <script>
      document.getElementById('username').focus();
    </script>
  </div>
{% end %}